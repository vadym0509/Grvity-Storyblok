<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Create Component with Storyblok API</title>
</head>
<body>
  <h1>Create Component with Storyblok API</h1>

  <form id="component-form">
    <label for="component-name">Component Name:</label>
    <input type="text" name="component-name" id="component-name">

    <label for="component-schema">Component Schema:</label>
<textarea name="component-schema" id="component-schema">{
  "title": "Example Component",
  "type": "object",
  "properties": {
    "title": {
      "type": "string",
      "title": "Title"
    },
    "body": {
      "type": "string",
      "title": "Body",
      "description": "Some text describing the component"
    },
    "image": {
      "type": "object",
      "title": "Image",
      "properties": {
        "url": {
          "type": "string",
          "title": "URL"
        },
        "alt": {
          "type": "string",
          "title": "Alt Text"
        }
      }
    }
  }
}</textarea>

    <button type="submit">Create Component</button>
  </form>

  <script>
    // Set up the Storyblok API client
    const apiToken = '8gIqgrjzthzL5GNQrSlLTAtt';
    const spaceId = '230897';
    const apiUrl = `https://api.storyblok.com/v2/spaces/${spaceId}`;

    const headers = {
      'Authorization': `Bearer ${apiToken}`,
      'Content-Type': 'application/json'
    };

    // Handle form submission
    const form = document.getElementById('component-form');
    form.addEventListener('submit', event => {
      event.preventDefault();

      // Get component data from form inputs
      const componentName = document.getElementById('component-name').value;
      const componentSchema = JSON.parse(document.getElementById('component-schema').value);

      // Create the component using the Storyblok API
      fetch(`${apiUrl}/components`, {
        method: 'POST',
        headers: headers,
        body: JSON.stringify({
          name: componentName,
          schema: componentSchema
        })
      })
      .then(response => response.json())
      .then(data => {
        console.log(`Component created with ID ${data.component.id}`);
      })
      .catch(error => {
        console.error(error);
      });
    });
  </script>
</body>
</html>
